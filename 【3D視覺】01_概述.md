---
title: 【3D視覺】1. 概述
zhihu-title-image: img/3D_Computer_Vision-0_common_images/0.png
zhihu-tags: 算法, 算法工程师, 计算机视觉
zhihu-url: https://zhuanlan.zhihu.com/p/507790840
---
本筆記為應忍冬老師的課程《3D感知技術與實踐》的學習筆記[^1]。

## 1. 從2D邁向3D

#### 3D圖的表示

本課研究的是3D數據的處理。3D數據一般可以以三種形式表示：
- 深度圖
- 3D點雲
- 灰度圖

#### 從2D到3D的技術發展

1. 上世紀60年代，通過旋轉得到了幾何體在不同視角的圖像；
2. 1982年，提出了三維重建理論；
3. 上世紀90年代，提出了多視幾何(Multiple View Geometry)和分層三維重建(Stratified 3D Reconstruction)；
4. 2010年起，通過深度神經網絡實現的2D圖像識別和目標檢測算法開始流行，并被應用于3D數據的處理，如用不同角度的投影作爲輸入，3D作爲輸出；又比如用3D點雲數據作爲輸入，分類&分割結果作爲輸出，進行識別任務。

## 2. 3D感知特點和面臨的難點

#### 3D數據處理的優點

- 3D數據相比2D數據更適用於信息量大的應用；
- 在能得到3D數據的前提下，對一些分割和識別任務來説，3D數據處理是更直接、簡潔的解決思路；
- 在能得到3D數據的前提下，對測量任務來説，3D處理更直接；
- 在能得到3D數據的前提下，不受光照影響；
- 對於人體行爲（比如人體姿態）的識別，用深度圖進行識別所需計算資源比2D識別低得多。

#### 3D數據處理的難點

- 實際應用中獲得的3D數據含有噪聲、干擾、畸變
- 3D數據分辨率一般比2D圖像低
- 3D數據容易出現運動模糊現象

## 3. 3D感知相關算法簡介

#### 3D數據處理總體流程

1. 數據獲取
2. 畸變矯正
3. 3D點雲獲取
4. 噪聲和離群點過濾（也可能在轉爲3D點雲前先進行噪聲過濾）
5. 數據格式轉換（為提高後續處理效率）
6. 多幀數據配准融合（單相機在多位置獲取數據時需要配准融合）
7. 特徵提取（表面重建、分割/分類識別、參數測量）

#### 3D數據獲取

- 雙目匹配3D成像（硬件只需倆普通相機，但匹配過程較困難）
- 結構光3D成像（通過光源發出的結構光在物體上反射效果獲得深度信息）
- 雙目匹配與結構光結合
- TOF 3D成像（光源發射調製光，計算發射調製信號與接收信號的相位差，進而計算距離差）

#### 畸變矯正

- 通過畸變模型調整像素位置，以補償桶形失真和枕形失真

#### 3D點雲獲取

- 相機獲取的是物體上的點到鏡頭的距離信息，須經轉換計算轉爲3D點雲信息
- 點雲數據通過邏輯運算可被轉爲體像素
- 用八叉樹算法可將點雲轉爲更高效的儲存格式
- 用KD-Tree可將點雲轉爲更高效的儲存格式，這種格式可實現快速最近鄰查找

#### 噪聲和離群點過濾

- 對深度圖直接做2D卷積（比如用高斯捲積核），但這種方法會造成高頻信息丟失，邊緣被模糊化
- 雙邊濾波可以避免邊緣被模糊化（相似的像素對濾波有更高的加權係數
- 對以3D網格形式出現的3D數據，可以用Laplacian平滑算法：3D網格内的每個頂點用與它相連的頂點的坐標均值取代
- 可以用Moving Least Squares算法使曲面平滑
- 對深度圖離群點，可以通過邊緣檢測算法或基於局部方差從深度圖計算計算離群點的出現位置
- 對點雲的離群點，可以基於最近鄰統計模型的離群點，也可以計算每個點到鄰域點的平均距離，這些平均距離看成高斯分佈，估計其均值d和方差s，濾除那些到鄰域點平均距離大於d+ks的點

#### 多幀數據配准融合

- 表面法向量：先取鄰域的點，鄰域被看作空間橢球體，法向量方向及對應橢球體的最短軸方向
- 獲取平面信息，即求滿足平面方程的特徵向量
- 對於多個平面的情況和含有干擾點的情況，可以先從點雲中隨機抽取子集，計算平面的特徵向量，進行平面參數擬合，如果擬合誤差足夠小（大多數點位於平面上），則平面特徵向量是有效的
- ICP點雲配准：對於從多個視角獲取的3D點雲數據，將待加入的點雲平移、旋轉，逐點計算最近鄰匹配，並通過最小二乘法計算旋轉矩陣

#### 表面重建

將點雲轉爲連續光滑表面模型可用SDF表面重建（可用Marching Cubes方法進行重建）

#### 空間幾何體測量算法

1. 先檢測3D背景，獲取不可移動的背景信息
2. 檢測出現變化的地方，即檢測物體的運動
3. 將不同物體分離
4. 檢測物體的輪廓，以測量尺寸

#### 靜態手勢識別

經過前後景分離后可走兩種路綫進行識別
- 傳統算法
    1. 檢測手的輪廓
    2. 用輪廓信息計算特徵參數
    3. 分類
- 深度學習算法

#### 人體動作識別

經過前後景分離后識別肢體類型，然後定位各個關節，最後識別動作

#### 基於3D數據的深度學習算法

- 直接沿用2D算法
- 從點雲數據得到各個角度的2D投影，然後用2D算法
- 專門爲3D數據（體像素）設計神經網絡（3維捲積核，運算量非常大）
- 專門針對點雲數據設計神經網絡

## 4. 課程介紹、挑戰項目、軟件工具介紹

#### 項目1：3D測量

用深度圖數據測算目標立方體的尺寸

#### 項目2：幾何體識別

識別深度圖種不同的集合體

#### 項目3：手勢識別

識別深度圖中的手勢

#### 學習目標

- 各種相機的原理
- 各種3D數據處理算法
- 各種識別算法

#### 工具

- 編程：python (包：opencv-python, numpy, scipy, matplotlib, python-pcl, mayavi, scikit-learn, scikit-image)
- 庫：PCL1.6, opencv4.1, tensorflow2
- 數據觀察工具：MeshLab, SmartToF SDK
- 程序編輯調試：VSCode

[^1]: https://college.aiimooc.com/preview/725 3D感知技术与实践